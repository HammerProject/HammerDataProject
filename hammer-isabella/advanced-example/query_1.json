//
// Hammer Project
// @ 2016 Hammer Project
// www.hammer-project.com
// mauro.pelucchi@gmail.com
//
// Estimated Average Requirements (EAR) and Upper Intake Levels (UL) values and 
// estimated percentiles of the usual nutrient intake distributions without fortification for children
// in East-Aprifca
// from africaopendata.org 
//
//
//
// SQL
// SELECT vitamin a, ear, daily gap
// FROM health indicators, nutrition
// WHERE region = "east-africa" and category = "children"

{
  "select": [
      { "column": { "instance": "health indicators", "label":"vitamin a"}},
      { "column": { "instance": "health indicators", "label":"ear"}},
      { "column": { "instance": "health indicators", "label":"daily gap"}}
  ],
  "from": [
    "health indicators",
    "nutrition"
  ],
  "where": [{"condition": {
      "instance1": "health indicators",
      "label1": "region",
      "operator": "eq",
      "value": "east-africa",
      "logicalOperator": "and"
    }}, {"condition": {
      "instance1": "nutrition",
      "label1": "category",
      "operator": "eq",
      "value": "children",
      "logicalOperator": "and"
    }}
  ]
}

//
// Datasource (total) --> 26
// Dataset (total) --> 27570
// Index (total) --> 22633
// (updated 3/5/2016 22:54)
//
// Selected keywords
// ----> children
// ----> east-africa
// ----> nutrition
// ----> health indicators
//
// db.index.aggregate([
// 	{ $match: {"$or" : [ { "keyword" : "children"} , { "keyword" : "east-africa"} , { "keyword" : "nutrition"} , { "keyword" : "health indicators"}]} },
// 	{ $project: {total: { $size: "$documents" }}}
// ]);
//
// { "_id" : "nutrition", "total" : 18 }
// { "_id" : "children", "total" : 67 }
// 
// Documents --> 85
//
// Without keywords
// db.index.aggregate([
// 	{ $match: {"$or" : [ { "keyword" : "category"}, { "keyword" : "region"}, { "keyword" : "daily gap"}, { "keyword" : "ear"}, { "keyword" : "vitamin a"}, { "keyword" : "children"} , { "keyword" : "east-africa"} , { "keyword" : "nutrition"} , { "keyword" : "health indicators"}]} },
// 	{ $project: {total: { $size: "$documents" }}}
// ]);
// 
// { "_id" : "ear", "total" : 1 }
// { "_id" : "nutrition", "total" : 18 }
// { "_id" : "category", "total" : 2 }
// { "_id" : "children", "total" : 67 }
// { "_id" : "region", "total" : 85 }
//
// Documents --> 173