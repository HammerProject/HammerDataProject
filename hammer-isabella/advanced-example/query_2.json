//
// Hammer Project
// @ 2016 Hammer Project
// www.hammer-project.com
// mauro.pelucchi@gmail.com
//
// Transparency Initiative in Africa (last 2 year)
// from africaopendata.org 
//
//
// SQL
// SELECT year, country, budget
// FROM transparency
// WHERE region = "africa" and year >= 2015

{
  "select": [
  	  { "column": { "instance": "transparency", "label":"year"}},
      { "column": { "instance": "transparency", "label":"country"}},
      { "column": { "instance": "transparency", "label":"budget"}}
  ],
  "from": [
    "transparency"
  ],
  "where": [{"condition": {
      "instance1": "transparency",
      "label1": "year",
      "operator": "ge",
      "value": 2015,
      "logicalOperator": "and"
    }},{"condition": {
      "instance1": "transparency",
      "label1": "region",
      "operator": "eq",
      "value": "Africa",
      "logicalOperator": "and"
    }}
  ]
}

//
// Open Data Sources (total) --> 27 (number of record in opendatasource collection)
// Open Data Resources (total) --> 39716 (number of record in opendataresource collection)
// Index keywords (total) --> 77027 (number of keywords in inverted index)
// (updated 4/5/2016 06:59)
//
// Selected keywords
// ----> africa
// ----> transparency
// 
// db.index.aggregate([
//	{ $match: {"$or" : [ { "keyword" : "africa"} , { "keyword" : "transparency"}]} },
//	{ $project: {total: { $size: "$documents" }}}
// ]);
//
// { "_id" : "africa", "total" : 151 }
// { "_id" : "transparency", "total" : 29 }
// 
// Resources (distinct) --> 122
//
// Without keywords
//  db.index.aggregate([
//  	{ $match: {"$or" : [ { "keyword" : "region"} , { "keyword" : "country"} , { "keyword" : "budget"} , { "keyword" : "2015"} , { "keyword" : "year"} ,{ "keyword" : "africa"} , { "keyword" : "transparency"}]} },
//  	{ $project: {total: { $size: "$documents" }}}
// ]);
//
// 
// { "_id" : "country", "total" : 154 }
// { "_id" : "2015", "total" : 803 }
// { "_id" : "africa", "total" : 151 }
// { "_id" : "budget", "total" : 184 }
// { "_id" : "region", "total" : 219 }
// { "_id" : "transparency", "total" : 29 }
// { "_id" : "year", "total" : 630 }
// 
// Documents --> 2170